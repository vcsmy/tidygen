# Generated by Django 4.2.7 on 2025-10-20 11:34

from django.conf import settings
import django.core.validators
from django.db import migrations, models
import django.db.models.deletion
import django.utils.timezone
import model_utils.fields


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('sales', '0001_initial'),
        ('hr', '0001_initial'),
        ('facility_management', '0001_initial'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='FieldTeam',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created', model_utils.fields.AutoCreatedField(default=django.utils.timezone.now, editable=False, verbose_name='created')),
                ('modified', model_utils.fields.AutoLastModifiedField(default=django.utils.timezone.now, editable=False, verbose_name='modified')),
                ('is_removed', models.BooleanField(default=False)),
                ('name', models.CharField(max_length=100, verbose_name='team name')),
                ('team_type', models.CharField(choices=[('cleaning', 'Cleaning Team'), ('maintenance', 'Maintenance Team'), ('specialized', 'Specialized Services'), ('emergency', 'Emergency Response')], max_length=20, verbose_name='team type')),
                ('status', models.CharField(choices=[('active', 'Active'), ('inactive', 'Inactive'), ('on_break', 'On Break'), ('off_duty', 'Off Duty')], default='active', max_length=20, verbose_name='status')),
                ('description', models.TextField(blank=True, verbose_name='description')),
                ('max_capacity', models.IntegerField(default=5, verbose_name='max capacity')),
                ('current_capacity', models.IntegerField(default=0, verbose_name='current capacity')),
                ('current_location', models.CharField(blank=True, max_length=200, verbose_name='current location')),
                ('total_jobs_completed', models.IntegerField(default=0, verbose_name='total jobs completed')),
                ('average_rating', models.DecimalField(decimal_places=2, default=0, max_digits=3, verbose_name='average rating')),
                ('on_time_percentage', models.DecimalField(decimal_places=2, default=0, max_digits=5, verbose_name='on time percentage')),
                ('blockchain_address', models.CharField(blank=True, max_length=42, verbose_name='blockchain address')),
                ('nft_token_id', models.CharField(blank=True, max_length=100, verbose_name='NFT token ID')),
                ('assigned_vehicle', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='assigned_teams', to='facility_management.vehicle')),
                ('home_base', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='field_teams', to='facility_management.facility')),
            ],
            options={
                'verbose_name': 'Field Team',
                'verbose_name_plural': 'Field Teams',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='ServiceRoute',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created', model_utils.fields.AutoCreatedField(default=django.utils.timezone.now, editable=False, verbose_name='created')),
                ('modified', model_utils.fields.AutoLastModifiedField(default=django.utils.timezone.now, editable=False, verbose_name='modified')),
                ('is_removed', models.BooleanField(default=False)),
                ('name', models.CharField(max_length=200, verbose_name='route name')),
                ('route_type', models.CharField(choices=[('daily', 'Daily Route'), ('weekly', 'Weekly Route'), ('monthly', 'Monthly Route'), ('custom', 'Custom Route')], max_length=20, verbose_name='route type')),
                ('status', models.CharField(choices=[('planned', 'Planned'), ('active', 'Active'), ('completed', 'Completed'), ('cancelled', 'Cancelled')], default='planned', max_length=20, verbose_name='status')),
                ('description', models.TextField(blank=True, verbose_name='description')),
                ('total_distance', models.DecimalField(decimal_places=2, default=0, max_digits=8, verbose_name='total distance (miles)')),
                ('estimated_duration', models.DurationField(blank=True, null=True, verbose_name='estimated duration')),
                ('actual_duration', models.DurationField(blank=True, null=True, verbose_name='actual duration')),
                ('scheduled_date', models.DateField(verbose_name='scheduled date')),
                ('start_time', models.TimeField(blank=True, null=True, verbose_name='start time')),
                ('end_time', models.TimeField(blank=True, null=True, verbose_name='end time')),
                ('total_stops', models.IntegerField(default=0, verbose_name='total stops')),
                ('completed_stops', models.IntegerField(default=0, verbose_name='completed stops')),
                ('efficiency_rating', models.DecimalField(decimal_places=2, default=0, max_digits=3, verbose_name='efficiency rating')),
                ('blockchain_transaction_hash', models.CharField(blank=True, max_length=66, verbose_name='blockchain transaction hash')),
                ('assigned_team', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='routes', to='field_operations.fieldteam')),
            ],
            options={
                'verbose_name': 'Service Route',
                'verbose_name_plural': 'Service Routes',
                'ordering': ['-scheduled_date', 'name'],
            },
        ),
        migrations.CreateModel(
            name='FieldJob',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created', model_utils.fields.AutoCreatedField(default=django.utils.timezone.now, editable=False, verbose_name='created')),
                ('modified', model_utils.fields.AutoLastModifiedField(default=django.utils.timezone.now, editable=False, verbose_name='modified')),
                ('is_removed', models.BooleanField(default=False)),
                ('job_number', models.CharField(max_length=50, unique=True, verbose_name='job number')),
                ('title', models.CharField(max_length=200, verbose_name='job title')),
                ('job_type', models.CharField(choices=[('cleaning', 'Cleaning Service'), ('maintenance', 'Maintenance'), ('inspection', 'Inspection'), ('repair', 'Repair'), ('installation', 'Installation'), ('emergency', 'Emergency Service')], max_length=20, verbose_name='job type')),
                ('priority', models.CharField(choices=[('low', 'Low'), ('medium', 'Medium'), ('high', 'High'), ('urgent', 'Urgent'), ('emergency', 'Emergency')], default='medium', max_length=20, verbose_name='priority')),
                ('status', models.CharField(choices=[('scheduled', 'Scheduled'), ('assigned', 'Assigned'), ('in_progress', 'In Progress'), ('completed', 'Completed'), ('cancelled', 'Cancelled'), ('on_hold', 'On Hold')], default='scheduled', max_length=20, verbose_name='status')),
                ('description', models.TextField(verbose_name='description')),
                ('special_instructions', models.TextField(blank=True, verbose_name='special instructions')),
                ('contact_person', models.CharField(blank=True, max_length=100, verbose_name='contact person')),
                ('contact_phone', models.CharField(blank=True, max_length=20, verbose_name='contact phone')),
                ('service_address', models.TextField(verbose_name='service address')),
                ('latitude', models.DecimalField(blank=True, decimal_places=8, max_digits=10, null=True, verbose_name='latitude')),
                ('longitude', models.DecimalField(blank=True, decimal_places=8, max_digits=11, null=True, verbose_name='longitude')),
                ('scheduled_date', models.DateField(verbose_name='scheduled date')),
                ('scheduled_start_time', models.TimeField(verbose_name='scheduled start time')),
                ('scheduled_end_time', models.TimeField(verbose_name='scheduled end time')),
                ('estimated_duration', models.DurationField(blank=True, null=True, verbose_name='estimated duration')),
                ('actual_duration', models.DurationField(blank=True, null=True, verbose_name='actual duration')),
                ('estimated_cost', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True, verbose_name='estimated cost')),
                ('actual_cost', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True, verbose_name='actual cost')),
                ('client_rate', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True, verbose_name='client rate')),
                ('completion_notes', models.TextField(blank=True, verbose_name='completion notes')),
                ('client_satisfaction_rating', models.IntegerField(blank=True, null=True, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(5)], verbose_name='client satisfaction rating')),
                ('completion_photos', models.JSONField(blank=True, default=list, verbose_name='completion photos')),
                ('smart_contract_address', models.CharField(blank=True, max_length=42, verbose_name='smart contract address')),
                ('blockchain_transaction_hash', models.CharField(blank=True, max_length=66, verbose_name='blockchain transaction hash')),
                ('payment_released', models.BooleanField(default=False, verbose_name='payment released')),
                ('assigned_route', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='jobs', to='field_operations.serviceroute')),
                ('assigned_team', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='assigned_jobs', to='field_operations.fieldteam')),
                ('client', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='field_jobs', to='sales.client')),
            ],
            options={
                'verbose_name': 'Field Job',
                'verbose_name_plural': 'Field Jobs',
                'ordering': ['-scheduled_date', 'scheduled_start_time'],
            },
        ),
        migrations.CreateModel(
            name='DispatchLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created', model_utils.fields.AutoCreatedField(default=django.utils.timezone.now, editable=False, verbose_name='created')),
                ('modified', model_utils.fields.AutoLastModifiedField(default=django.utils.timezone.now, editable=False, verbose_name='modified')),
                ('is_removed', models.BooleanField(default=False)),
                ('log_type', models.CharField(choices=[('assignment', 'Job Assignment'), ('update', 'Status Update'), ('communication', 'Communication'), ('route_change', 'Route Change'), ('emergency', 'Emergency')], max_length=20, verbose_name='log type')),
                ('message', models.TextField(verbose_name='message')),
                ('timestamp', models.DateTimeField(auto_now_add=True, verbose_name='timestamp')),
                ('blockchain_transaction_hash', models.CharField(blank=True, max_length=66, verbose_name='blockchain transaction hash')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='dispatch_logs', to=settings.AUTH_USER_MODEL)),
                ('job', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='dispatch_logs', to='field_operations.fieldjob')),
                ('team', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='dispatch_logs', to='field_operations.fieldteam')),
            ],
            options={
                'verbose_name': 'Dispatch Log',
                'verbose_name_plural': 'Dispatch Logs',
                'ordering': ['-timestamp'],
            },
        ),
        migrations.CreateModel(
            name='TeamMember',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created', model_utils.fields.AutoCreatedField(default=django.utils.timezone.now, editable=False, verbose_name='created')),
                ('modified', model_utils.fields.AutoLastModifiedField(default=django.utils.timezone.now, editable=False, verbose_name='modified')),
                ('is_removed', models.BooleanField(default=False)),
                ('role', models.CharField(choices=[('team_leader', 'Team Leader'), ('specialist', 'Specialist'), ('technician', 'Technician'), ('helper', 'Helper'), ('trainee', 'Trainee')], max_length=20, verbose_name='role')),
                ('is_team_leader', models.BooleanField(default=False, verbose_name='is team leader')),
                ('assigned_date', models.DateField(auto_now_add=True, verbose_name='assigned date')),
                ('is_active', models.BooleanField(default=True, verbose_name='active')),
                ('individual_rating', models.DecimalField(decimal_places=2, default=0, max_digits=3, verbose_name='individual rating')),
                ('jobs_completed', models.IntegerField(default=0, verbose_name='jobs completed')),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='team_memberships', to='hr.employee')),
                ('team', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='members', to='field_operations.fieldteam')),
            ],
            options={
                'verbose_name': 'Team Member',
                'verbose_name_plural': 'Team Members',
                'ordering': ['team', 'role'],
                'unique_together': {('team', 'employee')},
            },
        ),
        migrations.CreateModel(
            name='RouteStop',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created', model_utils.fields.AutoCreatedField(default=django.utils.timezone.now, editable=False, verbose_name='created')),
                ('modified', model_utils.fields.AutoLastModifiedField(default=django.utils.timezone.now, editable=False, verbose_name='modified')),
                ('is_removed', models.BooleanField(default=False)),
                ('stop_type', models.CharField(choices=[('service', 'Service Stop'), ('pickup', 'Pickup Stop'), ('delivery', 'Delivery Stop'), ('maintenance', 'Maintenance Stop'), ('break', 'Break Stop')], max_length=20, verbose_name='stop type')),
                ('sequence_number', models.IntegerField(validators=[django.core.validators.MinValueValidator(1)], verbose_name='sequence number')),
                ('status', models.CharField(choices=[('pending', 'Pending'), ('in_progress', 'In Progress'), ('completed', 'Completed'), ('skipped', 'Skipped'), ('cancelled', 'Cancelled')], default='pending', max_length=20, verbose_name='status')),
                ('address', models.TextField(verbose_name='address')),
                ('latitude', models.DecimalField(blank=True, decimal_places=8, max_digits=10, null=True, verbose_name='latitude')),
                ('longitude', models.DecimalField(blank=True, decimal_places=8, max_digits=11, null=True, verbose_name='longitude')),
                ('estimated_arrival', models.DateTimeField(blank=True, null=True, verbose_name='estimated arrival')),
                ('actual_arrival', models.DateTimeField(blank=True, null=True, verbose_name='actual arrival')),
                ('estimated_departure', models.DateTimeField(blank=True, null=True, verbose_name='estimated departure')),
                ('actual_departure', models.DateTimeField(blank=True, null=True, verbose_name='actual departure')),
                ('estimated_duration', models.DurationField(blank=True, null=True, verbose_name='estimated duration')),
                ('actual_duration', models.DurationField(blank=True, null=True, verbose_name='actual duration')),
                ('service_notes', models.TextField(blank=True, verbose_name='service notes')),
                ('completion_notes', models.TextField(blank=True, verbose_name='completion notes')),
                ('blockchain_transaction_hash', models.CharField(blank=True, max_length=66, verbose_name='blockchain transaction hash')),
                ('client', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='route_stops', to='sales.client')),
                ('route', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='stops', to='field_operations.serviceroute')),
            ],
            options={
                'verbose_name': 'Route Stop',
                'verbose_name_plural': 'Route Stops',
                'ordering': ['route', 'sequence_number'],
                'unique_together': {('route', 'sequence_number')},
            },
        ),
        migrations.CreateModel(
            name='JobEquipment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created', model_utils.fields.AutoCreatedField(default=django.utils.timezone.now, editable=False, verbose_name='created')),
                ('modified', model_utils.fields.AutoLastModifiedField(default=django.utils.timezone.now, editable=False, verbose_name='modified')),
                ('is_removed', models.BooleanField(default=False)),
                ('quantity_used', models.IntegerField(default=1, verbose_name='quantity used')),
                ('usage_notes', models.TextField(blank=True, verbose_name='usage notes')),
                ('condition_before', models.CharField(choices=[('excellent', 'Excellent'), ('good', 'Good'), ('fair', 'Fair'), ('poor', 'Poor')], default='good', max_length=20, verbose_name='condition before')),
                ('condition_after', models.CharField(choices=[('excellent', 'Excellent'), ('good', 'Good'), ('fair', 'Fair'), ('poor', 'Poor')], default='good', max_length=20, verbose_name='condition after')),
                ('equipment', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='job_usage', to='facility_management.equipment')),
                ('job', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='equipment_used', to='field_operations.fieldjob')),
            ],
            options={
                'verbose_name': 'Job Equipment',
                'verbose_name_plural': 'Job Equipment',
                'unique_together': {('job', 'equipment')},
            },
        ),
    ]
